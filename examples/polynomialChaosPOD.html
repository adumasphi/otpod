<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Polynomial chaos POD &#8212; otpod  documentation</title>
    
    <link rel="stylesheet" href="../_static/openturns.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="otpod  documentation" href="../index.html" />
    <link rel="up" title="Examples of the API" href="../examples.html" />
    <link rel="next" title="Kriging POD" href="krigingPOD.html" />
    <link rel="prev" title="Quantile Regression POD" href="quantileRegressionPOD.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head>
  <body role="document">
<div class="pageheader">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../user_manual.html">Doc</a></li>
    <li><a href="../examples.html">Examples</a></li>
    <li><a href="https://github.com/adumasphi/otpod">Code</a></li>
  </ul>
  <a href="../index.html">
    <h1>
      <img src="../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      otpod
    </h1>
    <h2> A module to build Probability of Detection for Non Destructive Testing. </h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="krigingPOD.html" title="Kriging POD"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quantileRegressionPOD.html" title="Quantile Regression POD"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">otpod  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../examples.html" accesskey="U">Examples of the API</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Polynomial chaos POD</a><ul>
<li><a class="reference internal" href="#generate-1d-data">Generate 1D data</a></li>
<li><a class="reference internal" href="#build-pod-with-polynomial-chaos-model">Build POD with polynomial chaos model</a><ul>
<li><a class="reference internal" href="#user-defined-defect-sizes">User-defined defect sizes</a></li>
<li><a class="reference internal" href="#running-the-polynomial-chaos-based-pod">Running the polynomial chaos based POD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compute-detection-size">Compute detection size</a></li>
<li><a class="reference internal" href="#get-pod-numericalmathfunction">get POD NumericalMathFunction</a></li>
<li><a class="reference internal" href="#compute-the-r2-and-the-q2">Compute the R2 and the Q2</a></li>
<li><a class="reference internal" href="#show-pod-graphs">Show POD graphs</a><ul>
<li><a class="reference internal" href="#mean-pod-and-pod-at-confidence-level-with-the-detection-size-for-a-given-probability-level">Mean POD and POD at confidence level with the detection size for a given probability level</a></li>
<li><a class="reference internal" href="#show-the-polynomial-chaos-model-only-available-if-the-input-dimension-is-1">Show the polynomial chaos model (only available if the input dimension is 1)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-user-mode">Advanced user mode</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quantileRegressionPOD.html"
                        title="previous chapter">Quantile Regression POD</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="krigingPOD.html"
                        title="next chapter">Kriging POD</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/examples/polynomialChaosPOD.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><a class="reference external" href="polynomialChaosPOD.ipynb">ipynb source code</a></p>
<div class="section" id="polynomial-chaos-pod">
<h1>Polynomial chaos POD<a class="headerlink" href="#polynomial-chaos-pod" title="Permalink to this headline">¶</a></h1>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># import relevant module</span>
<span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">otpod</span>
<span class="c1"># enable display figure in notebook</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
<div class="section" id="generate-1d-data">
<h2>Generate 1D data<a class="headerlink" href="#generate-1d-data" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">ot</span><span class="o">.</span><span class="n">RandomGenerator</span><span class="o">.</span><span class="n">SetSeed</span><span class="p">(</span><span class="mi">123456</span><span class="p">)</span>
<span class="n">defectDist</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)</span>
<span class="c1"># normal epsilon distribution</span>
<span class="n">epsilon</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">)</span>
<span class="n">defects</span> <span class="o">=</span> <span class="n">defectDist</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">signalsInvBoxCox</span> <span class="o">=</span> <span class="n">defects</span> <span class="o">*</span> <span class="mf">43.</span> <span class="o">+</span> <span class="n">epsilon</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mf">2.5</span>
<span class="c1"># Inverse Box Cox transformation</span>
<span class="n">invBoxCox</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">InverseBoxCoxTransform</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">signals</span> <span class="o">=</span> <span class="n">invBoxCox</span><span class="p">(</span><span class="n">signalsInvBoxCox</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="build-pod-with-polynomial-chaos-model">
<h2>Build POD with polynomial chaos model<a class="headerlink" href="#build-pod-with-polynomial-chaos-model" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># signal detection threshold</span>
<span class="n">detection</span> <span class="o">=</span> <span class="mf">200.</span>
<span class="c1"># The POD with censored data actually builds a POD only on filtered data.</span>
<span class="c1"># A warning is diplayed in this case.</span>
<span class="n">POD</span> <span class="o">=</span> <span class="n">otpod</span><span class="o">.</span><span class="n">PolynomialChaosPOD</span><span class="p">(</span><span class="n">defects</span><span class="p">,</span> <span class="n">signals</span><span class="p">,</span> <span class="n">detection</span><span class="p">,</span>
                               <span class="n">noiseThres</span><span class="o">=</span><span class="mf">200.</span><span class="p">,</span> <span class="n">saturationThres</span><span class="o">=</span><span class="mf">1700.</span><span class="p">,</span>
                               <span class="n">boxCox</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="user-defined-defect-sizes">
<h3>User-defined defect sizes<a class="headerlink" href="#user-defined-defect-sizes" title="Permalink to this headline">¶</a></h3>
<p>The user-defined defect sizes must range between the minimum and maximum
of the defect values after filtering. An error is raised if it is not
the case. The available range is then returned to the user.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Default defect sizes</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Default defect sizes : &#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getDefectSizes</span><span class="p">())</span>

<span class="c1"># Wrong range</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">POD</span><span class="o">.</span><span class="n">setDefectSizes</span><span class="p">([</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.57</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Range of the defect sizes is too large, it returns a value error : &#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Default</span> <span class="n">defect</span> <span class="n">sizes</span> <span class="p">:</span>
<span class="p">[</span> <span class="mf">0.19288542</span>  <span class="mf">0.21420345</span>  <span class="mf">0.23552149</span>  <span class="mf">0.25683952</span>  <span class="mf">0.27815756</span>  <span class="mf">0.29947559</span>
  <span class="mf">0.32079363</span>  <span class="mf">0.34211166</span>  <span class="mf">0.3634297</span>   <span class="mf">0.38474773</span>  <span class="mf">0.40606577</span>  <span class="mf">0.4273838</span>
  <span class="mf">0.44870184</span>  <span class="mf">0.47001987</span>  <span class="mf">0.49133791</span>  <span class="mf">0.51265594</span>  <span class="mf">0.53397398</span>  <span class="mf">0.55529201</span>
  <span class="mf">0.57661005</span>  <span class="mf">0.59792808</span><span class="p">]</span>

<span class="n">Range</span> <span class="n">of</span> <span class="n">the</span> <span class="n">defect</span> <span class="n">sizes</span> <span class="ow">is</span> <span class="n">too</span> <span class="n">large</span><span class="p">,</span> <span class="n">it</span> <span class="n">returns</span> <span class="n">a</span> <span class="n">value</span> <span class="n">error</span> <span class="p">:</span>
<span class="n">Defect</span> <span class="n">sizes</span> <span class="n">must</span> <span class="nb">range</span> <span class="n">between</span> <span class="mf">0.1929</span> <span class="ow">and</span> <span class="mf">0.5979</span><span class="o">.</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Good range</span>
<span class="n">POD</span><span class="o">.</span><span class="n">setDefectSizes</span><span class="p">([</span><span class="mf">0.1929</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5979</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;User-defined defect size : &#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getDefectSizes</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">User</span><span class="o">-</span><span class="n">defined</span> <span class="n">defect</span> <span class="n">size</span> <span class="p">:</span>
<span class="p">[</span> <span class="mf">0.1929</span>  <span class="mf">0.3</span>     <span class="mf">0.4</span>     <span class="mf">0.5</span>     <span class="mf">0.5979</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-polynomial-chaos-based-pod">
<h3>Running the polynomial chaos based POD<a class="headerlink" href="#running-the-polynomial-chaos-based-pod" title="Permalink to this headline">¶</a></h3>
<p>The computing time can be reduced by setting the simulation size
attribute to another value. However the confidence interval is less
accurate.</p>
<p>The sampling size is the number of the samples used to compute the POD
with the Monte Carlo simulation for each defect sizes.</p>
<p>A progress is displayed, which can be disabled with the method
<em>setVerbose</em>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Computing the confidence interval in the run takes few minutes.</span>
<span class="n">POD</span> <span class="o">=</span> <span class="n">otpod</span><span class="o">.</span><span class="n">PolynomialChaosPOD</span><span class="p">(</span><span class="n">defects</span><span class="p">,</span> <span class="n">signals</span><span class="p">,</span> <span class="n">detection</span><span class="p">,</span>
                                  <span class="n">boxCox</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># we can change the sample size of the Monte Carlo simulation</span>
<span class="n">POD</span><span class="o">.</span><span class="n">setSamplingSize</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span> <span class="c1"># default is 5000</span>
<span class="c1"># we can also change the size of the simulation to compute the confidence interval</span>
<span class="n">POD</span><span class="o">.</span><span class="n">setSimulationSize</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span> <span class="c1"># default is 1000</span>
<span class="c1"># we can change the degree of the polynomial chaos, default is 3.</span>
<span class="n">POD</span><span class="o">.</span><span class="n">setDegree</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="n">POD</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Start</span> <span class="n">build</span> <span class="n">polynomial</span> <span class="n">chaos</span> <span class="n">model</span><span class="o">...</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">model</span> <span class="n">completed</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">validation</span> <span class="n">R2</span> <span class="p">(</span><span class="o">&gt;</span><span class="mf">0.8</span><span class="p">)</span> <span class="p">:</span> <span class="mf">0.8947</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">validation</span> <span class="n">Q2</span> <span class="p">(</span><span class="o">&gt;</span><span class="mf">0.8</span><span class="p">)</span> <span class="p">:</span> <span class="mf">0.8914</span>
<span class="n">Computing</span> <span class="n">POD</span> <span class="n">per</span> <span class="n">defect</span><span class="p">:</span> <span class="p">[</span><span class="o">==================================================</span><span class="p">]</span> <span class="mf">100.00</span><span class="o">%</span> <span class="n">Done</span>
<span class="n">CPU</span> <span class="n">times</span><span class="p">:</span> <span class="n">user</span> <span class="mi">2</span><span class="nb">min</span> <span class="mi">1</span><span class="n">s</span><span class="p">,</span> <span class="n">sys</span><span class="p">:</span> <span class="mf">6.55</span> <span class="n">s</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">2</span><span class="nb">min</span> <span class="mi">8</span><span class="n">s</span>
<span class="n">Wall</span> <span class="n">time</span><span class="p">:</span> <span class="mi">2</span><span class="nb">min</span> <span class="mi">19</span><span class="n">s</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="compute-detection-size">
<h2>Compute detection size<a class="headerlink" href="#compute-detection-size" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Detection size at probability level 0.9</span>
<span class="c1"># and confidence level 0.95</span>
<span class="nb">print</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">computeDetectionSize</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>

<span class="c1"># probability level 0.95 with confidence level 0.99</span>
<span class="nb">print</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">computeDetectionSize</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a90</span> <span class="p">:</span> <span class="mf">0.307344</span><span class="p">,</span> <span class="n">a90</span><span class="o">/</span><span class="mi">95</span> <span class="p">:</span> <span class="mf">0.314406</span><span class="p">]</span>
<span class="p">[</span><span class="n">a95</span> <span class="p">:</span> <span class="mf">0.328888</span><span class="p">,</span> <span class="n">a95</span><span class="o">/</span><span class="mi">99</span> <span class="p">:</span> <span class="mf">0.335715</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-pod-numericalmathfunction">
<h2>get POD NumericalMathFunction<a class="headerlink" href="#get-pod-numericalmathfunction" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># get the POD model</span>
<span class="n">PODmodel</span> <span class="o">=</span> <span class="n">POD</span><span class="o">.</span><span class="n">getPODModel</span><span class="p">()</span>
<span class="c1"># get the POD model at the given confidence level</span>
<span class="n">PODmodelCl95</span> <span class="o">=</span> <span class="n">POD</span><span class="o">.</span><span class="n">getPODCLModel</span><span class="p">(</span><span class="mf">0.95</span><span class="p">)</span>

<span class="c1"># compute the probability of detection for a given defect value</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;POD : </span><span class="si">{:0.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PODmodel</span><span class="p">([</span><span class="mf">0.3</span><span class="p">])[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;POD at level 0.95 : </span><span class="si">{:0.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PODmodelCl95</span><span class="p">([</span><span class="mf">0.3</span><span class="p">])[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">POD</span> <span class="p">:</span> <span class="mf">0.871</span>
<span class="n">POD</span> <span class="n">at</span> <span class="n">level</span> <span class="mf">0.95</span> <span class="p">:</span> <span class="mf">0.841</span>
</pre></div>
</div>
</div>
<div class="section" id="compute-the-r2-and-the-q2">
<h2>Compute the R2 and the Q2<a class="headerlink" href="#compute-the-r2-and-the-q2" title="Permalink to this headline">¶</a></h2>
<p>Enable to check the quality of the model.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;R2 : </span><span class="si">{:0.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getR2</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Q2 : </span><span class="si">{:0.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getQ2</span><span class="p">()))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span> <span class="p">:</span> <span class="mf">0.8947</span>
<span class="n">Q2</span> <span class="p">:</span> <span class="mf">0.8914</span>
</pre></div>
</div>
</div>
<div class="section" id="show-pod-graphs">
<h2>Show POD graphs<a class="headerlink" href="#show-pod-graphs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mean-pod-and-pod-at-confidence-level-with-the-detection-size-for-a-given-probability-level">
<h3>Mean POD and POD at confidence level with the detection size for a given probability level<a class="headerlink" href="#mean-pod-and-pod-at-confidence-level-with-the-detection-size-for-a-given-probability-level" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">POD</span><span class="o">.</span><span class="n">drawPOD</span><span class="p">(</span><span class="n">probabilityLevel</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">confidenceLevel</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;figure/PODPolyChaos.png&#39;</span><span class="p">)</span>
<span class="c1"># The figure is saved in PODPolyChaos.png</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dumas</span><span class="o">/</span><span class="n">anaconda2</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">matplotlib</span><span class="o">/</span><span class="n">figure</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">397</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">matplotlib</span> <span class="ow">is</span> <span class="n">currently</span> <span class="n">using</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">GUI</span> <span class="n">backend</span><span class="p">,</span> <span class="n">so</span> <span class="n">cannot</span> <span class="n">show</span> <span class="n">the</span> <span class="n">figure</span>
  <span class="s2">&quot;matplotlib is currently using a non-GUI backend, &quot;</span>
</pre></div>
</div>
<img alt="../_images/polynomialChaosPOD_19_1.png" src="../_images/polynomialChaosPOD_19_1.png" />
</div>
<div class="section" id="show-the-polynomial-chaos-model-only-available-if-the-input-dimension-is-1">
<h3>Show the polynomial chaos model (only available if the input dimension is 1)<a class="headerlink" href="#show-the-polynomial-chaos-model-only-available-if-the-input-dimension-is-1" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">POD</span><span class="o">.</span><span class="n">drawPolynomialChaosModel</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/polynomialChaosPOD_21_0.png" src="../_images/polynomialChaosPOD_21_0.png" />
</div>
</div>
<div class="section" id="advanced-user-mode">
<h2>Advanced user mode<a class="headerlink" href="#advanced-user-mode" title="Permalink to this headline">¶</a></h2>
<p>The user can defined one or all parameters of the polynomial chaos
algorithm : - the distribution of the input parameters - the adaptive
strategy - the projection strategy</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># new POD study</span>
<span class="n">PODnew</span> <span class="o">=</span> <span class="n">otpod</span><span class="o">.</span><span class="n">PolynomialChaosPOD</span><span class="p">(</span><span class="n">defects</span><span class="p">,</span> <span class="n">signals</span><span class="p">,</span> <span class="n">detection</span><span class="p">,</span>
                               <span class="n">boxCox</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># define the input parameter distribution</span>
<span class="n">distribution</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">ComposedDistribution</span><span class="p">([</span><span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)])</span>
<span class="n">PODnew</span><span class="o">.</span><span class="n">setDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># define the adaptive strategy</span>
<span class="n">polyCol</span> <span class="o">=</span> <span class="p">[</span><span class="n">ot</span><span class="o">.</span><span class="n">HermiteFactory</span><span class="p">()]</span>
<span class="n">enumerateFunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">EnumerateFunction</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">multivariateBasis</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">OrthogonalProductPolynomialFactory</span><span class="p">(</span><span class="n">polyCol</span><span class="p">,</span> <span class="n">enumerateFunction</span><span class="p">)</span>
<span class="c1"># degree 1</span>
<span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">indexMax</span> <span class="o">=</span> <span class="n">enumerateFunction</span><span class="o">.</span><span class="n">getStrataCumulatedCardinal</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">adaptiveStrategy</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">FixedStrategy</span><span class="p">(</span><span class="n">multivariateBasis</span><span class="p">,</span> <span class="n">indexMax</span><span class="p">)</span>

<span class="n">PODnew</span><span class="o">.</span><span class="n">setAdaptiveStrategy</span><span class="p">(</span><span class="n">adaptiveStrategy</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># define the projection strategy</span>
<span class="n">projectionStrategy</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LeastSquaresStrategy</span><span class="p">()</span>
<span class="n">PODnew</span><span class="o">.</span><span class="n">setProjectionStrategy</span><span class="p">(</span><span class="n">projectionStrategy</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">POD</span><span class="o">.</span><span class="n">setSamplingSize</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">POD</span><span class="o">.</span><span class="n">setSimulationSize</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="n">PODnew</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Start</span> <span class="n">build</span> <span class="n">polynomial</span> <span class="n">chaos</span> <span class="n">model</span><span class="o">...</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">model</span> <span class="n">completed</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">validation</span> <span class="n">R2</span> <span class="p">(</span><span class="o">&gt;</span><span class="mf">0.8</span><span class="p">)</span> <span class="p">:</span> <span class="mf">0.8947</span>
<span class="n">Polynomial</span> <span class="n">chaos</span> <span class="n">validation</span> <span class="n">Q2</span> <span class="p">(</span><span class="o">&gt;</span><span class="mf">0.8</span><span class="p">)</span> <span class="p">:</span> <span class="mf">0.8914</span>
<span class="n">Computing</span> <span class="n">POD</span> <span class="n">per</span> <span class="n">defect</span><span class="p">:</span> <span class="p">[</span><span class="o">==================================================</span><span class="p">]</span> <span class="mf">100.00</span><span class="o">%</span> <span class="n">Done</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">PODnew</span><span class="o">.</span><span class="n">computeDetectionSize</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;R2 : </span><span class="si">{:0.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getR2</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Q2 : </span><span class="si">{:0.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">POD</span><span class="o">.</span><span class="n">getQ2</span><span class="p">()))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a90</span> <span class="p">:</span> <span class="mf">0.304772</span><span class="p">,</span> <span class="n">a90</span><span class="o">/</span><span class="mi">95</span> <span class="p">:</span> <span class="mf">0.315494</span><span class="p">]</span>
<span class="n">R2</span> <span class="p">:</span> <span class="mf">0.8947</span>
<span class="n">Q2</span> <span class="p">:</span> <span class="mf">0.8914</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">PODnew</span><span class="o">.</span><span class="n">drawPOD</span><span class="p">(</span><span class="n">probabilityLevel</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">confidenceLevel</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/polynomialChaosPOD_29_0.png" src="../_images/polynomialChaosPOD_29_0.png" />
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">PODnew</span><span class="o">.</span><span class="n">drawPolynomialChaosModel</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/polynomialChaosPOD_30_0.png" src="../_images/polynomialChaosPOD_30_0.png" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="krigingPOD.html" title="Kriging POD"
             >next</a> |</li>
        <li class="right" >
          <a href="quantileRegressionPOD.html" title="Quantile Regression POD"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">otpod  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../examples.html" >Examples of the API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016.
      Last updated on May 18, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>